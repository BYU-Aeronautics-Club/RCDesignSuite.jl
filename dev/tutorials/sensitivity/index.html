<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Sensitivity Study · RCDesignSuite.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">RCDesignSuite.jl</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Intro</a></li><li><span class="tocitem">Quick Start</span><ul><li class="is-active"><a class="tocitem" href>Sensitivity Study</a><ul class="internal"><li><a class="tocitem" href="#What-is-a-sensitivity-study?"><span>What is a sensitivity study?</span></a></li><li><a class="tocitem" href="#How-do-I-start-a-sensitivity-study?"><span>How do I start a sensitivity study?</span></a></li><li><a class="tocitem" href="#Do-I-have-to-include-all-the-inputs-and-outputs-in-my-study?"><span>Do I have to include all the inputs and outputs in my study?</span></a></li><li><a class="tocitem" href="#Connecting-the-inputs-and-the-outputs"><span>Connecting the inputs and the outputs</span></a></li><li><a class="tocitem" href="#Setting-up-the-Sensitivity-Study"><span>Setting up the Sensitivity Study</span></a></li></ul></li><li><a class="tocitem" href="../initialsizing/">Initial Sizing</a></li></ul></li><li><a class="tocitem" href="../../howto/">Guided Examples</a></li><li><a class="tocitem" href="../../reference/">API Reference</a></li><li><a class="tocitem" href="../../theory/">Theory</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Quick Start</a></li><li class="is-active"><a href>Sensitivity Study</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Sensitivity Study</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/BYU-Aeronautics-Club/RCDesignSuite.jl/blob/master/docs/src/tutorials/sensitivity.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Sensitivity-Study"><a class="docs-heading-anchor" href="#Sensitivity-Study">Sensitivity Study</a><a id="Sensitivity-Study-1"></a><a class="docs-heading-anchor-permalink" href="#Sensitivity-Study" title="Permalink"></a></h1><p>This is a follow-along tutorial for a basic sensitivity study.  You can find the template for this tutorial in the templates directory at the root level of this repository (<a href="https://github.com/BYU-Aeronautics-Club/RCDesignSuite.jl/blob/master/templates/sensitivity.jl">here&#39;s a link</a>).</p><h2 id="What-is-a-sensitivity-study?"><a class="docs-heading-anchor" href="#What-is-a-sensitivity-study?">What is a sensitivity study?</a><a id="What-is-a-sensitivity-study?-1"></a><a class="docs-heading-anchor-permalink" href="#What-is-a-sensitivity-study?" title="Permalink"></a></h2><p>Put simply, a sensitivity study is a study where we explore the sensitivities of the outputs to the inputs of a system.</p><h2 id="How-do-I-start-a-sensitivity-study?"><a class="docs-heading-anchor" href="#How-do-I-start-a-sensitivity-study?">How do I start a sensitivity study?</a><a id="How-do-I-start-a-sensitivity-study?-1"></a><a class="docs-heading-anchor-permalink" href="#How-do-I-start-a-sensitivity-study?" title="Permalink"></a></h2><p>A sensitivity study can start at either the input or output end.  We&#39;ll start at both and work our way toward the middle. At the output side of things, we&#39;ll pick some performance criteria.  In this case, let&#39;s go with the Mission Scoring Criteria from the 2020-2021 AIAA DBF Competition Rules:</p><p><strong>Flight Mission 1:</strong> Failure = 0, Success = 1</p><p><strong>Flight Mission 2:</strong> <span>$M2 = 1 + [N_{(\#containers/time)}/Max_{(\#containers/time)}]$</span> where <span>$Max_{(\#containers/time)}$</span> is the highest <span>$\#containers/time$</span> of all competing teams, and time is the time to complete 3 laps.</p><p><strong>Flight Mission 3:</strong> <span>$M3 = 2 + [N_{(\#laps \times sensor length \times sensor weight)} / Max_{(\#laps \times sensor length \times sensor weight)}]$</span> where <span>$Max_{(\#laps \times sensor length \times sensor weight)}$</span> is the highest <span>$\#laps \times sensor length \times sensor weight$</span> score of all competing teams.</p><p><strong>Ground Mission</strong> <span>$GM = [Min_{time} / N_{time}]$</span> where <span>$Min_{time}$</span> is the fastest time of all competing teams.</p><p><strong>Design Report</strong> Range from 0 to 100 based on rubric.</p><p>For the sake of our example here, we&#39;ll chose a few design variables (inputs) to which the design will  likely be sensitive.  These are:</p><ul><li>Weight, <span>$W$</span>,</li><li>Wing Area, <span>$S$</span>,</li><li>Zero Lift Drag Coefficient, <span>$C_{D_0}$</span>,</li><li>Available Battery Energy, <span>$eb$</span>,</li><li>Total Propulsive Efficiency, <span>$\eta$</span>, and</li><li>Available Thrust at Propeller, <span>$T$</span>.</li></ul><p>Noting some of the specific payload items in the Flight Mission scores, we&#39;ll also probably need to include</p><ul><li>the number of containers, <span>$ncon$</span>, and</li><li>sensor length times sensor weight, <span>$slxsw$</span>.</li></ul><p>Take note that we are <em>not</em> simply choosing the direct inputs to the scoring functions.  We want to calculate things like time and number of laps based on our design to see how the scores are sensitive to the <em>design</em> rather than the scoring function inputs.</p><h2 id="Do-I-have-to-include-all-the-inputs-and-outputs-in-my-study?"><a class="docs-heading-anchor" href="#Do-I-have-to-include-all-the-inputs-and-outputs-in-my-study?">Do I have to include all the inputs and outputs in my study?</a><a id="Do-I-have-to-include-all-the-inputs-and-outputs-in-my-study?-1"></a><a class="docs-heading-anchor-permalink" href="#Do-I-have-to-include-all-the-inputs-and-outputs-in-my-study?" title="Permalink"></a></h2><p>For the purposes of this example sensitivity study, we&#39;ll assume success on the first flight mission, and we might as well assume a perfect score on the design report, but either way, these metrics are not sensitive to our design, so we exclude them.  We will also exclude the Ground Mission in this example since it is difficult to quantify <em>a priori</em> what the score might be, as physical testing is most likely needed.</p><p>That leaves us with Flight Missions 2 and 3 as our sensitivity metrics. That is to say, we are going to look at how changing our basic design variables affects the values for M2 and M3.</p><p>As for inputs, our choices are already very basic.  Each of these is comprised of more detailed variables. For example, the weight is a sum of all the component weights, the wing area is a function of span and chord, and the propulsive efficiency is a combination of battery, wire, ESC, motor, and propeller efficiencies.  For the sake of the sensitivity study, if a change in one of the detailed components yields the same change in output as another, then you should probably choose a more general input.  This is precisely why we chose the quantity sensor length times sensor weight rather than each of those separately.</p><div class="admonition is-success"><header class="admonition-header">how to know what to include</header><div class="admonition-body"><p>Another way to think about which inputs to include is to look at how they affect the derivative of the function. If they have the same effect, then include them together.</p></div></div><h2 id="Connecting-the-inputs-and-the-outputs"><a class="docs-heading-anchor" href="#Connecting-the-inputs-and-the-outputs">Connecting the inputs and the outputs</a><a id="Connecting-the-inputs-and-the-outputs-1"></a><a class="docs-heading-anchor-permalink" href="#Connecting-the-inputs-and-the-outputs" title="Permalink"></a></h2><p>This is where we arrive at the hard part of the sensitivity study.  In order to connect the inputs and the outputs, we need to create some sort of model.  To do so, we need to decide how simple or complex we want to be and what assumptions we are willing to make.  For the sake of this example, we are going to make some big assumptions and keep things quite simple.</p><h3 id="The-Objective-Function"><a class="docs-heading-anchor" href="#The-Objective-Function">The Objective Function</a><a id="The-Objective-Function-1"></a><a class="docs-heading-anchor-permalink" href="#The-Objective-Function" title="Permalink"></a></h3><p>We&#39;re going to start with a function we&#39;ll call <code>objective</code>. Why? Mostly because how we have chosen to set things up in this example resembles an optimization problem, and that&#39;s a common name for this kind of function.  This is the function that takes in the basic inputs and outputs the overall &quot;objective,&quot; which is the sum of the mission scores in our case.</p><pre><code class="language-">function objective(design_variables)

    # Do some stuff

    return M2 + M3

end</code></pre><p>But what do we put in the middle?  How do we get from inputs to outputs?  There are a lot of options, but let&#39;s try the following:</p><pre><code class="language-julia">import RCDesignSuite; rcds = RCDesignSuite;

function objective(design_variables; return_all=false)

    ### STEP 1: UNPACK DESIGN VARIABLES ###
    # Here is where you unpack the relevant design variables.
    W               = design_variables[1] # Aircraft Weight
    S               = design_variables[2] # Wing Area
    CD0             = design_variables[3] # Zero Lift Drag Coeff of Aircraft
    eta             = design_variables[4] # Total Propulsive Efficiency
    eb              = design_variables[5] # Available Battery Energy
    T               = design_variables[6] # Available Thrust at Prop.
    ncon            = design_variables[7] # Number of Containers
    slxsw           = design_variables[8] # Length x weight of sensor
    # Normalization Factors are the last 2 inputs in this example
    M2_norm_factor  = design_variables[end-1] # Flight Mission 2 Normalization Factor
    M3_norm_factor  = design_variables[end] # Flight Mission 3 Normalization Factor



    ### STEP 2a: CALCULATE FLIGHT MISSION 2 SCORE ###
    # Here is where you set up the inputs for flight mission 2
    M2_inputs = design_variables[[1:3;6:7]]

    # Call the mission2() function here (to be defined below)
    M2 = mission2(M2_inputs, M2_norm_factor)


    ### STEP 2b: CALCUALATE FLIGHT MISSION 3 SCORE ###
    # Here is where you set up the inputs for flight mission 3
    M3_inputs = design_variables[[4;5;8]]

    # Call the mission3() function here (to be defined below)
    M3 = mission3(M3_inputs, M2_norm_factor)



    ### STEP 3: SUM UP OBJECTIVES ###

    # Sum them up
    totalpoints = M2 + M3

    # Return the outputs (sometimes we might want to see them individually)
    if return_all
        return totalpoints, M2, M3
    else
        return totalpoints
    end

end</code></pre><pre class="documenter-example-output">objective (generic function with 1 method)</pre><p>You&#39;ll notice that we still need to define some auxiliary functions, <code>mission2()</code> and <code>mission3()</code>.  We could have just put everything in one function, but it&#39;s already a little messy, so we&#39;ll break it up into bite-sized chunks.</p><h3 id="The-Mission-Functions"><a class="docs-heading-anchor" href="#The-Mission-Functions">The Mission Functions</a><a id="The-Mission-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#The-Mission-Functions" title="Permalink"></a></h3><p>For Flight Mission 2, remember our objective is <span>$1 + [N_{(\#containers/time)}/Max_{(\#containers/time)}]$</span>.  Number of containers is a direct input, and for the sake of this example, we&#39;re going to select a lap distance that seems reasonable (with the right models, you could calculate the lap distance).  We&#39;re also going to use one of the functions found in RCDesignSuite.jl, namely, <code>maxvelocity()</code> to find the velocity and then calculate the time to complete the mission.</p><pre><code class="language-julia">function mission2(M2_inputs, M2_norm_factor, lap_distance=3000)

    W       = M2_inputs[1] # Aircraft Weight
    S       = M2_inputs[2] # Wing Area
    CD0     = M2_inputs[3] # Zero Lift Drag Coeff of Aircraft
    T       = M2_inputs[4] # Available Thrust
    ncon    = M2_inputs[5] # Number of Containers

    # Get Velocity
    V = rcds.maxvelocity(T, W, S, CD0)

    # Calculate Time
    time = 3*lap_distance/V

    # Return M2 Score
    return 1 + (ncon/time) / M2_norm_factor

end</code></pre><pre class="documenter-example-output">mission2 (generic function with 2 methods)</pre><p>For Flight Mission 3, the metric is <span>$2 + [N_{(\#laps \times sensor length \times sensor weight)} / Max_{(\#laps \times sensor length \times sensor weight)}]$</span>.  So we&#39;ll calculate the total number of laps using the <code>endurance_time()</code> function. Note that we are just making up some of the inputs for the endurance function for simplicity of this example.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Several of the inputs to the <code>endurance_time()</code> function could have been included as full design variables, but we&#39;re takeing some liberties here to keep things simple.</p></div></div><pre><code class="language-julia">function mission3(M3_inputs, M2_norm_factor, lap_distance=3000)

    eta     = M3_inputs[1] # Total Propulsive Efficiency
    eb      = M3_inputs[2] # Available Battery Energy
    slxsw   = M3_inputs[3] # Length x weight of sensor

    # make up L and D to get an L/D of 10, which is reasonable.
    L = 10
    D = 1

    g = 9.81 #fact

    # make up a reasonable velocity
    V = 30 # fast enough to fly, but not win.

    # make up a take off and battery mass that makes sense.
    mb = 1
    mto = 4

    # find endurance time
    time = rcds.endurance_time(eb, eta, L, mb, g, V, D, mto)

    # calculate number of laps
    distance = V*time
    nlaps = distance/lap_distance

    # Return M3 score
    return 2 + (nlaps*slxsw) / M3_norm_factor

end</code></pre><pre class="documenter-example-output">mission3 (generic function with 2 methods)</pre><p>Now we should have all the functions we need to have a working objective function (remembering that this is NOT a real sensitivity study, and should NOT be used for any sort of competition or design, but rather as a template for how you might put together a real one).</p><p>Now we can move on to the actual sensitivity study part of things.</p><h2 id="Setting-up-the-Sensitivity-Study"><a class="docs-heading-anchor" href="#Setting-up-the-Sensitivity-Study">Setting up the Sensitivity Study</a><a id="Setting-up-the-Sensitivity-Study-1"></a><a class="docs-heading-anchor-permalink" href="#Setting-up-the-Sensitivity-Study" title="Permalink"></a></h2></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../">« Intro</a><a class="docs-footer-nextpage" href="../initialsizing/">Initial Sizing »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Friday 7 May 2021 23:53">Friday 7 May 2021</span>. Using Julia version 1.5.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
